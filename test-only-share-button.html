<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Only Share Button - VaoCa UI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #4a5568;
            margin-bottom: 10px;
        }

        .header p {
            color: #718096;
            font-size: 16px;
        }

        .test-section {
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #38a169;
        }

        .test-section h3 {
            color: #2d3748;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .test-section h3::before {
            content: "‚úÖ";
            margin-right: 10px;
        }

        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .image-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .image-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        .image-card img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 4px;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s;
        }

        .image-card img:hover {
            border-color: #38a169;
        }

        .image-info {
            margin-top: 10px;
            text-align: center;
        }

        .image-title {
            font-weight: bold;
            color: #2d3748;
            margin-bottom: 5px;
        }

        .image-details {
            font-size: 12px;
            color: #718096;
        }

        .success-banner {
            background: #c6f6d5;
            border: 1px solid #9ae6b4;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
            text-align: center;
        }

        .success-banner h4 {
            color: #2f855a;
            margin: 0 0 10px 0;
        }

        .success-banner p {
            color: #2f855a;
            margin: 0;
        }

        .removed-features {
            background: #fed7d7;
            border: 1px solid #feb2b2;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
        }

        .removed-features h4 {
            color: #c53030;
            margin: 0 0 10px 0;
        }

        .removed-features ul {
            color: #c53030;
            margin: 10px 0;
            padding-left: 20px;
        }

        .test-instructions {
            background: #bee3f8;
            border: 1px solid #90cdf4;
            border-radius: 6px;
            padding: 15px;
            margin: 20px 0;
        }

        .test-instructions h4 {
            color: #2b6cb0;
            margin: 0 0 10px 0;
        }

        .test-instructions ol {
            color: #2b6cb0;
            margin: 10px 0;
            padding-left: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="header">
            <h1>üéØ Test Only Share Button</h1>
            <p>Ki·ªÉm tra module ch·ªâ c√≤n button Share, ƒë√£ x√≥a Save v√† Copy</p>
        </div>

        <div class="success-banner">
            <h4>‚úÖ ƒê√£ ho√†n th√†nh vi·ªác d·ªçn d·∫πp module</h4>
            <p>C√°c button Save v√† Copy c√πng v·ªõi t·∫•t c·∫£ functions li√™n quan ƒë√£ ƒë∆∞·ª£c x√≥a ho√†n to√†n</p>
        </div>

        <div class="removed-features">
            <h4>‚ùå C√°c t√≠nh nƒÉng ƒë√£ b·ªã x√≥a</h4>
            <ul>
                <li><strong>Save Button:</strong> Button l∆∞u ·∫£nh v√† function _saveImage()</li>
                <li><strong>Copy Button:</strong> Button sao ch√©p ·∫£nh v√† function _copyImage()</li>
                <li><strong>Download Functions:</strong> _downloadDataURL(), _copyDataURL()</li>
                <li><strong>CORS Handling:</strong> _copyExternalImage(), _copyImageViaCanvas()</li>
                <li><strong>Event Listeners:</strong> T·∫•t c·∫£ events cho save v√† copy buttons</li>
                <li><strong>Button References:</strong> saveImageButton, copyImageButton properties</li>
            </ul>
        </div>

        <div class="test-instructions">
            <h4>üìã H∆∞·ªõng d·∫´n test</h4>
            <ol>
                <li>Click v√†o b·∫•t k·ª≥ ·∫£nh n√†o d∆∞·ªõi ƒë√¢y ƒë·ªÉ m·ªü fullscreen</li>
                <li>Ki·ªÉm tra ch·ªâ c√≥ button Share (chia s·∫ª) xu·∫•t hi·ªán</li>
                <li>Verify button Save v√† Copy ƒë√£ bi·∫øn m·∫•t ho√†n to√†n</li>
                <li>Test button Share ho·∫°t ƒë·ªông b√¨nh th∆∞·ªùng</li>
                <li>Ki·ªÉm tra console kh√¥ng c√≥ l·ªói li√™n quan ƒë·∫øn missing buttons</li>
            </ol>
        </div>

        <div class="test-section">
            <h3>Test Images - Ch·ªâ c√≥ Share Button</h3>

            <div class="image-gallery">
                <div class="image-card">
                    <img src="https://via.placeholder.com/300x200/ff6b6b/ffffff?text=Test+Image+1" alt="Test Image 1">
                    <div class="image-info">
                        <div class="image-title">Test Image 1</div>
                        <div class="image-details">300x200 - Red placeholder</div>
                    </div>
                </div>

                <div class="image-card">
                    <img src="https://via.placeholder.com/300x200/4ecdc4/ffffff?text=Test+Image+2" alt="Test Image 2">
                    <div class="image-info">
                        <div class="image-title">Test Image 2</div>
                        <div class="image-details">300x200 - Teal placeholder</div>
                    </div>
                </div>

                <div class="image-card">
                    <img src="https://via.placeholder.com/300x200/45b7d1/ffffff?text=Test+Image+3" alt="Test Image 3">
                    <div class="image-info">
                        <div class="image-title">Test Image 3</div>
                        <div class="image-details">300x200 - Blue placeholder</div>
                    </div>
                </div>

                <div class="image-card">
                    <img src="https://via.placeholder.com/300x200/f39c12/ffffff?text=Canvas+Test" alt="Canvas Test">
                    <div class="image-info">
                        <div class="image-title">Canvas Test</div>
                        <div class="image-details">300x200 - Orange placeholder</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h3>Generated Canvas Images</h3>
            <p>C√°c ·∫£nh ƒë∆∞·ª£c t·∫°o b·∫±ng canvas ƒë·ªÉ test share functionality:</p>
            <div id="canvasGallery" class="image-gallery">
                <!-- Canvas images will be generated here -->
            </div>
        </div>
    </div>

    <!-- Import VaoCa UI Module -->
    <script type="module">
        import { UIElements_VaoCa, uiManager } from './VCUIElements.js';

        // Make uiManager globally available
        window.uiManager = uiManager;

        // Setup global image click listener
        uiManager._setupGlobalImageClickListener();

        console.log('‚úÖ VaoCa UI Module loaded - Only Share button should be available');
        console.log('‚ùå Save and Copy buttons have been completely removed');
    </script>

    <script>
        // Generate canvas images for testing
        function generateCanvasImages() {
            const gallery = document.getElementById('canvasGallery');

            const canvasTests = [
                { name: 'Simple Rectangle', color: '#e74c3c' },
                { name: 'Gradient Circle', color: '#3498db' },
                { name: 'Pattern Test', color: '#2ecc71' },
                { name: 'Text Canvas', color: '#9b59b6' }
            ];

            canvasTests.forEach((test, index) => {
                const canvas = document.createElement('canvas');
                canvas.width = 300;
                canvas.height = 200;
                const ctx = canvas.getContext('2d');

                // Create different patterns
                switch (index) {
                    case 0:
                        ctx.fillStyle = test.color;
                        ctx.fillRect(50, 50, 200, 100);
                        break;
                    case 1:
                        const gradient = ctx.createRadialGradient(150, 100, 20, 150, 100, 80);
                        gradient.addColorStop(0, test.color);
                        gradient.addColorStop(1, '#ffffff');
                        ctx.fillStyle = gradient;
                        ctx.beginPath();
                        ctx.arc(150, 100, 80, 0, Math.PI * 2);
                        ctx.fill();
                        break;
                    case 2:
                        for (let i = 0; i < 300; i += 20) {
                            for (let j = 0; j < 200; j += 20) {
                                ctx.fillStyle = (i + j) % 40 === 0 ? test.color : '#ffffff';
                                ctx.fillRect(i, j, 20, 20);
                            }
                        }
                        break;
                    case 3:
                        ctx.fillStyle = test.color;
                        ctx.fillRect(0, 0, 300, 200);
                        ctx.fillStyle = '#ffffff';
                        ctx.font = '24px Arial';
                        ctx.textAlign = 'center';
                        ctx.fillText('Share Test', 150, 100);
                        ctx.fillText('Only Button', 150, 130);
                        break;
                }

                const dataURL = canvas.toDataURL('image/png');

                const card = document.createElement('div');
                card.className = 'image-card';

                const img = document.createElement('img');
                img.src = dataURL;
                img.alt = test.name;

                const info = document.createElement('div');
                info.className = 'image-info';
                info.innerHTML = `
                    <div class="image-title">${test.name}</div>
                    <div class="image-details">Canvas Generated - 300x200</div>
                `;

                card.appendChild(img);
                card.appendChild(info);
                gallery.appendChild(card);
            });

            console.log('‚úÖ Canvas images generated for testing');
        }

        // Check if old buttons still exist (they shouldn't)
        function verifyButtonsRemoved() {
            setTimeout(() => {
                const saveBtn = document.querySelector('#saveImageBtn');
                const copyBtn = document.querySelector('#copyImageBtn');
                const shareBtn = document.querySelector('#shareImageBtn');

                if (!saveBtn && !copyBtn && shareBtn) {
                    console.log('‚úÖ VERIFICATION PASSED: Save and Copy buttons successfully removed');
                    console.log('‚úÖ Share button is present and ready');
                } else {
                    console.error('‚ùå VERIFICATION FAILED: Some buttons still exist or share button missing');
                    console.log('Save button exists:', !!saveBtn);
                    console.log('Copy button exists:', !!copyBtn);
                    console.log('Share button exists:', !!shareBtn);
                }
            }, 1000);
        }

        // Auto-generate test content
        setTimeout(() => {
            generateCanvasImages();
            verifyButtonsRemoved();
        }, 500);
    </script>
</body>

</html>